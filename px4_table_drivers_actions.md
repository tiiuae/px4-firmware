# PX4 uORB and HW Monitoring

## **Drivers, uORB Monitoring Proposal**

| Driver                  | Physical Input          | Publishes                                                                               | Path                                | **Brief Description**                              | Failure Severity          | Monitoring Indicators                                                                 |
| ----------------------- | ----------------------- | --------------------------------------------------------------------------------------- | ----------------------------------- | -------------------------------------------------- | ------------------------- | -------------------------------------------------------------------------------------- |
| `actuators`             | `actuators`             | `actuator_outputs_s, esc_status_s`                                                      | `src/drivers/actuators`             | Handles PWM/DSHOT motor/servo outputs.             | NORMAL<br>SEVERE<br>CRITICAL | Watch `esc_status_s` for esc_online_flags, failures; actuator_outputs_s for command mismatches. |
| `adc`                   | `adc`                   | `adc_report_s, system_power_s`                                                          | `src/drivers/adc`                   | Reads analog voltages (battery, sensors).          | NORMAL<br>SEVERE          | Watch `adc_report_s` for voltage anomalies; system_power_s for power issues.           |
| `barometer`             | `Barometer`             | `sensor_baro_s`                                                                         | `src/drivers/barometer`             | Reads barometric pressure/altitude.                | NORMAL<br>SEVERE<br>CRITICAL | Watch `sensor_baro_s` for data validity, pressure variance; estimator_status for baro health. |
| `batt_smbus`            | `batt_smbus`            | `ORB_ID`                                                                                | `src/drivers/batt_smbus`            | Smart battery over SMBus (voltage, current, SOC).  | NORMAL<br>SEVERE<br>CRITICAL | Watch battery_status_s for voltage/current/SOC; system_power_s for low battery warnings. |
| `cdcacm_autostart`      | `cdcacm_autostart`      | `-`                                                                                      | `src/drivers/cdcacm_autostart`      | Auto-start USB CDC ACM serial.                     | NORMAL<br>CRITICAL                    | Watch serial connection logs; no uORB.                                                 |
| `cyphal`                | `cyphal`                | `T, battery_status_s, output_control_s`                                                 | `src/drivers/cyphal`                | UAVCAN v1/Cyphal robotics bus driver.              | NORMAL<br>SEVERE          | Watch battery_status_s; can_interface_status_s for bus health.                         |
| `differential_pressure` | `differential_pressure` | `differential_pressure_s`                                                               | `src/drivers/differential_pressure` | Airspeed sensor differential pressure.             | NORMAL<br>SEVERE<br>CRITICAL          | Watch `differential_pressure_s` for data validity; airspeed_selector for sensor health. |
| `distance_sensor`       | `distance_sensor`       | `ORB_ID, obstacle_distance_s`                                                           | `src/drivers/distance_sensor`       | Lidar/ultrasonic range measurements.               | NORMAL<br>SEVERE<br>CRITICAL          | Watch `obstacle_distance_s` for range data; sensor timeouts.                           |
| `dshot`                 | `dshot`                 | `vehicle_command_ack_s`                                                                 | `src/drivers/dshot`                 | Digital ESC protocol output.                       | NORMAL<br>SEVERE<br>CRITICAL | Watch `esc_status_s` for DSHOT telemetry; vehicle_command_ack_s for protocol errors.   |
| `gnss`                  | `gnss`                  | `gps_dump_s, gps_inject_data_s, satellite_info_s, sensor_gps_s`                         | `src/drivers/gnss`                  | GNSS receiver (usually high-level interface).      | NORMAL<br>SEVERE<br>CRITICAL | Watch `sensor_gps_s` for fix quality, satellites; estimator_status for GPS health.     |
| `gpio`                  | `gpio`                  | `gpio_in_s`                                                                             | `src/drivers/gpio`                  | General-purpose digital I/O.                       | LOG                    | Watch `gpio_in_s` for pin states; hardware interrupts.                                 |
| `gps`                   | `GPS`                   | `gps_dump_s, gps_inject_data_s, satellite_info_s, sensor_gnss_relative_s, sensor_gps_s` | `src/drivers/gps`                   | GPS hardware driver (serial, I2C, CAN).            | NORMAL<br>SEVERE<br>CRITICAL | Watch `sensor_gps_s` for position accuracy, HDOP; failure_detector_status for GPS loss. |
| `heater`                | `heater`                | `heater_status_s`                                                                       | `src/drivers/heater`                | IMU heater for temperature control.                | NORMAL<br>SEVERE<br>CRITICAL                    | Watch `heater_status_s` for temperature control; IMU data for thermal stability.       |
| `imu`                   | `IMU`                   | `sensor_baro_s`                                                                         | `src/drivers/imu`                   | IMU sensor data: accel, gyro (and sometimes baro). | NORMAL<br>SEVERE<br>CRITICAL | Watch `sensor_accel_s`, `sensor_gyro_s` for data rates, variances; estimator_status for IMU health. |
| `ins`                   | `ins`                   | `estimator_status_s, sensor_baro_s, sensor_gps_s, sensor_selection_s, vehicle_attitude_s, vehicle_global_position_s, vehicle_local_position_s` | `src/drivers/ins` | Integrated Navigation System sensor fusion.        | NORMAL<br>SEVERE<br>CRITICAL | Watch `estimator_status_s` for innovation checks, GPS/accel/gyro health; vehicle_attitude_s for stability. |
| `linux_pwm_out`         | `linux_pwm_out`         | `-`                                                                                      | `src/drivers/linux_pwm_out`         | PWM output on Linux boards.                        | NORMAL<br>SEVERE<br>CRITICAL | Watch actuator_outputs_s; PWM signal integrity.                                        |
| `magnetometer`          | `Magnetometer`          | `-`                                                                                      | `src/drivers/magnetometer`          | Magnetometer (compass) sensor.                     | NORMAL<br>SEVERE<br>CRITICAL | Watch `sensor_mag_s` for magnetic field data; estimator_status for mag health.         |
| `power_monitor`         | `power_monitor`         | `power_monitor_s`                                                                       | `src/drivers/power_monitor`         | Power module voltage/current sensing.              | NORMAL<br>SEVERE<br>CRITICAL | Watch `power_monitor_s` for voltage/current; battery_status_s for power health.        |
| `pwm_esc`               | `pwm_esc`               | `actuator_outputs_s`                                                                    | `src/drivers/pwm_esc`               | PWM-based ESC outputs.                             | NORMAL<br>SEVERE<br>CRITICAL | Watch `esc_status_s` for PWM ESC health; actuator_outputs_s for output consistency.    |
| `pwm_input`             | `pwm_input`             | `-`                                                                                      | `src/drivers/pwm_input`             | RC PWM input capture.                              | LOG | Watch input_rc_s for PWM signal loss; RC failsafe.                                     |
| `pwm_out`               | `pwm_out`               | `-`                                                                                      | `src/drivers/pwm_out`               | Generic PWM output driver.                         | NORMAL<br>SEVERE<br>CRITICAL | Watch actuator_outputs_s; PWM generation errors.                                       |
| `px4io`                 | `px4io`                 | `input_rc_s, px4io_status_s, vehicle_command_ack_s`                                     | `src/drivers/px4io`                 | Interface to PX4IO co-processor.                   | NORMAL<br>SEVERE<br>CRITICAL | Watch `px4io_status_s` for IO health; input_rc_s for RC data; actuator_outputs_s.       |
| `rc`                    | `rc`                    | `input_rc_s`                                                                            | `src/drivers/rc`                    | Reads RC input via PPM/SBUS/DSM.                   | NORMAL<br>SEVERE<br>CRITICAL | Watch `input_rc_s` for channel data; RC loss detection.                                |
| `rc_input`              | `rc_input`              | `input_rc_s, vehicle_command_ack_s, vehicle_command_s`                                  | `src/drivers/rc_input`              | High-level RC input manager.                       | NORMAL<br>SEVERE<br>CRITICAL | Watch `input_rc_s` for RC status; vehicle_command_ack_s for input commands.            |
| `smart_battery`         | `smart_battery`         | `ORB_ID`                                                                                | `src/drivers/smart_battery`         | SMBus/SmartBattery interface.                      | NORMAL<br>SEVERE<br>CRITICAL | Watch battery_status_s for smart battery data; power monitoring.                       |
| `tattu_can`             | `tattu_can`             | `battery_status_s`                                                                      | `src/drivers/tattu_can`             | Tattu CAN smart battery.                           | NORMAL<br>SEVERE<br>CRITICAL | Watch `battery_status_s` for CAN battery data; bus errors.                             |
| `telemetry`             | `telemetry`             | `ORB_ID, iridiumsbd_status_s`                                                           | `src/drivers/telemetry`             | Telemetry radio / Iridium SBD.                     | NORMAL<br>SEVERE          | Watch telemetry status; link quality.                                                  |
| `transponder`           | `transponder`           | `transponder_report_s`                                                                  | `src/drivers/transponder`           | ADS-B transponder.                                 | NORMAL<br>SEVERE                    | Watch `transponder_report_s` for ADS-B data.                                            |
| `uavcan`                | `uavcan`                | `ORB_ID, _orb_topic, can_interface_status_s, esc_status_s, sensor_baro_s, uavcan_parameter_value_s, vehicle_command_ack_s` | `src/drivers/uavcan` | UAVCAN v0 peripheral bus driver.                   | NORMAL<br>SEVERE<br>CRITICAL | Watch `can_interface_status_s`; esc_status_s; sensor data for UAVCAN health.           |
| `uavcannode`            | `uavcannode`            | `actuator_armed_s, actuator_motors_s, actuator_servos_s, gps_inject_data_s, led_control_s, tune_control_s` | `src/drivers/uavcannode` | Node-side UAVCAN interface.                        | NORMAL<br>SEVERE          | Watch actuator messages; UAVCAN node status.                                           |

### Failure Severity Legend
- **NORMAL**: Continue operating as usual.
- **SEVERE**: Likely fly home (e.g., RTL - Return to Launch).
- **CRITICAL**: Safe land immediately.

**Note**: The trigger of the actions will depend upon the rules defined in the decision engine. At one severe status of a driver the decision engine will not take action but if there are several modules in a severe state then it will trigger a safe action defined on the secondary px4.
